#!/usr/bin/env node
/*! For license information please see ipynb2web.cli.min.cjs.LICENSE.txt */
(()=>{"use strict";var e={3:e=>{e.exports=require("path")},216:(e,n,t)=>{t.r(n),t.d(n,{convertNb:()=>w,get_metadata:()=>_,nb2json:()=>g});const r=require("marked");function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return a(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function c(e,n){return"<details "+(n?"open":"")+"> <summary>Click to toggle</summary> "+e+"</details>"}function i(e){return(e=(e=(e=(e=(e=e.replaceAll("ðŸ™‚","&#1F642")).replaceAll("ðŸ˜³","&#128563")).replaceAll("â€ƒ","&#8195")).replaceAll("ðŸ‘·","&#128119")).replaceAll("ðŸ§¡","&#129505")).replaceAll("ðŸ’–","&#128150")}function u(e){return function(e){var n=[];e=e.replace(/<pre[\s\S]*?<\/pre>|<code[\s\S]*?<\/code>/g,function(e){return"__CODE_".concat(n.push(e)-1,"__")});return(e=e.replace(/\[([^\]]*?)\]\s*\{\s*([^}]*)\}/g,function(e,n,t){return"<span".concat(function(e){var n=e.match(/#([A-Za-z0-9_-]+)/),t=o(e.matchAll(/\.([A-Za-z0-9_-]+)/g)).map(function(e){return e[1]});return"".concat(n?' id="'.concat(n[1],'"'):"").concat(t.length?' class="'.concat(t.join(" "),'"'):"")}(t),">").concat(n,"</span>")})).replace(/__CODE_(\d+)__/g,function(e,t){return n[t]})}(e=function(e){var n=0;return e.replace(/\^\[([\s\S]+?)\]/g,function(e,t){console.log("Inline note:",t),n++;var r='<label tabindex="0" for="note'.concat(n,'" class="notelbl">[').concat(n,"]</label>");return'<span class="note">\n      <input type="checkbox" id="note'.concat(n,'" class="notebox">\n      ').concat(r,'\n      <aside class="inline-note"> \n        ').concat(r,"\n        ").concat(t,"\n      </aside>\n    </span>")})}(e=function(e){var n=[];e=e.replace(/<pre[\s\S]*?<\/pre>|<code[\s\S]*?<\/code>/g,function(e){return"__CODE_".concat(n.push(e)-1,"__")});for(var t=function(e,n){return"<div".concat(r(e),">").concat(n.trim(),"</div>")},r=function(e){var n=e.match(/#([A-Za-z0-9_-]+)/),t=o(e.matchAll(/\.([A-Za-z0-9_-]+)/g)).map(function(e){return e[1]});return"".concat(n?' id="'.concat(n[1],'"'):"").concat(t.length?' class="'.concat(t.join(" "),'"'):"")},a=6;a>0;a--){var c=":".repeat(a),i=new RegExp("".concat(c,"\\s*{\\s*([^}]*)}\\s*([\\s\\S]*?)\\s*").concat(c),"g");e=e.replace(i,function(e,n,r){return t(n,r.trim())})}return e.replace(/__CODE_(\d+)__/g,function(e,t){return n[t]})}(e)))}function s(e,n,t){return e.replace(n,function(e,n){var r;return(null===(r=t.replace)||void 0===r?void 0:r.call(t,"$1",n))||t(e,n)})}function l(){var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var u=r&&r.prototype instanceof i?r:i,s=Object.create(u.prototype);return p(s,"_invoke",function(t,r,o){var a,i,u,s=0,l=o||[],p=!1,f={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(n,t){return a=n,i=0,u=e,f.n=t,c}};function d(t,r){for(i=t,u=r,n=0;!p&&s&&!o&&n<l.length;n++){var o,a=l[n],d=f.p,v=a[2];t>3?(o=v===r)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=d&&((o=t<2&&d<a[1])?(i=0,f.v=r,f.n=a[1]):d<v&&(o=t<3||a[0]>r||r>v)&&(a[4]=t,a[5]=r,f.n=v,i=0))}if(o||t>1)return c;throw p=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(p&&1===l&&d(l,v),i=l,u=v;(n=i<2?e:u)||!p;){a||(i?i<3?(i>1&&(f.n=-1),d(i,u)):f.n=u:f.v=u);try{if(s=2,a){if(i||(o="next"),n=a[o]){if(!(n=n.call(a,u)))throw TypeError("iterator result is not an object");if(!n.done)return n;u=n.value,i<2&&(i=0)}else 1===i&&(n=a.return)&&n.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((n=(p=f.n<0)?u:t.call(r,f))!==c)break}catch(n){a=e,i=1,u=n}finally{s=1}}return{value:n,done:p}}}(t,o,a),!0),s}var c={};function i(){}function u(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(p(n={},r,function(){return this}),n),d=s.prototype=i.prototype=Object.create(f);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,p(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return u.prototype=s,p(d,"constructor",s),p(s,"constructor",u),u.displayName="GeneratorFunction",p(s,o,"GeneratorFunction"),p(d),p(d,o,"Generator"),p(d,r,function(){return this}),p(d,"toString",function(){return"[object Generator]"}),(l=function(){return{w:a,m:v}})()}function p(e,n,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}p=function(e,n,t,r){function a(n,t){p(e,n,function(e){return this._invoke(n,t,e)})}n?o?o(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(a("next",0),a("throw",1),a("return",2))},p(e,n,t,r)}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return v(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?v(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return c=e.done,e},e:function(e){i=!0,a=e},f:function(){try{c||null==t.return||t.return()}finally{if(i)throw a}}}}function v(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function y(e,n,t,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void t(e)}i.done?n(u):Promise.resolve(u).then(r,o)}var h=!1,m=[];function g(e){return b.apply(this,arguments)}function b(){var e;return e=l().m(function e(n){var t,r,o,a,c,u,s,p=arguments;return l().w(function(e){for(;;)switch(e.n){case 0:return t=p.length>1&&void 0!==p[1]&&p[1],m=[],h=!1,r=n,"undefined"==typeof process||n.startsWith("http")||(r="http://localhost:8085/".concat(n,".ipynb")),e.n=1,fetch(r,{headers:{"Content-Type":"application/json; charset=utf-8"}});case 1:return o=e.v,e.n=2,o.json();case 2:return a=e.v,(c=_(a.cells[0])).filename=n.split("/")[n.split("/").length-1].toLowerCase().replaceAll(" ","_"),t&&console.log("- get_metadata",c,"\n"),u=w(a.cells.slice(1),c,t).flat().join(" "),t&&m.length&&console.log({pyCode:m}),c.pyCode=m,(c.prettify||h)&&(u+='\n  <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"><\/script>\n  <link rel="stylesheet" href="https://cdn.rawgit.com/google/code-prettify/master/styles/desert.css"/>\n  '),s=i(u),t&&console.log("- - replaceEmojis Ran","\n"),e.a(2,{meta:c,content:s})}},e)}),b=function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function c(e){y(a,r,o,c,i,"next",e)}function i(e){y(a,r,o,c,i,"throw",e)}c(void 0)})},b.apply(this,arguments)}function _(e){var n,t={},r=d(e.source);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.startsWith("#"))t.title=o.replaceAll("\n","").replaceAll("# ","",2);else if(o.startsWith(">"))t.summary=o.replaceAll("\n","").replaceAll("> ","",1);else if(o.startsWith("-")){var a=o.slice(o.indexOf("- ")+2,o.indexOf(": ")),c=o.slice(o.indexOf(": ")+2).replaceAll("\n","").trim();t[a]=c}}}catch(e){r.e(e)}finally{r.f()}return t}function w(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t&&console.group("- convertNb Running");var o=e.map(function(e){return function(e,n){var t;return t="markdown"==e.cell_type?function(e){var n=(0,r.marked)(e);return n=s(n=n.replace(/\s{2,}<\/p>/g,"</p><br>"),/<pre><code>([\s\S]*?)<\/code><\/pre>/g,function(e,n){return h=!0,"<pre class='prettyprint'>".concat(n,"</pre>")}),n=u(n=s(n,/<a\s+(?:[^>]*?\s+)?href="(.*?)"/g,function(e,n){return n.startsWith("./")||(e+=' target="_blank" rel="nosopener noreferrer nofollow"'),e}))}(e.source.join(" ")):function(e,n){var t=[],r=[];if(e.source.length){var o=e.source;r=function(e){var n=e.split(/\s+/);return["#collapse_input_open","#collapse_input","#collapse_output_open","#collapse_output","#hide_input","#hide_output","#hide","%%capture","%%javascript","%%html","#export"].filter(function(e){return n.includes(e)})}(o[0]),r.length>0&&(o=o.slice(1)),o=function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"#export"==n[n.length-1]&&m.push(e);var o,a=d(n);try{for(a.s();!(o=a.n()).done;){var i=o.value;if(["#hide","#hide_input","%%javascript","%%html","%%capture"].includes(i))return""}}catch(e){a.e(e)}finally{a.f()}if(t.prettify&&(e="<pre class='prettyprint'>".concat(e,"</pre>")),n&&!!n.includes("#collapse_input_open")){r&&console.log(n);var u,s=d(n);try{for(s.s();!(u=s.n()).done;){var l=u.value;e=(e=e.replaceAll(l+"\r\n","")).replaceAll(l+"\n",""),"#collapse_input_open"==l?e=c(e,!0):"#collapse_input"==l&&(e=c(e,!1))}}catch(e){s.e(e)}finally{s.f()}return e}}(o.join(" "),r,n),t.push(o)}if(e.outputs.length){var a,i=d(e.outputs);try{for(i.s();!(a=i.n()).done;){var u=a.value;t.push(O(u,r))}}catch(e){i.e(e)}finally{i.f()}}return t}(e,n),t}(e,n,t)});return t&&console.groupEnd(),o}function O(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("error"==e.output_type)return"";if("stream"==e.output_type){if("stderr"==e.name)return"";e.data={"text/html":e.text}}var r=Object.keys(e.data);r.includes("text/html")?e=(e=e.data["text/html"]).join(""):r.includes("application/javascript")?e="<script>"+e.data["application/javascript"]+"<\/script>":r.includes("image/png")?e='<img src="data:image/png;base64,'+e.data["image/png"]+"\" alt='Image Alt Text'>":r.includes("text/plain")&&(e=/<Figure/.test(e.data["text/plain"])?"":e.data["text/plain"]);var o,a=d(n);try{for(a.s();!(o=a.n()).done;){var i=o.value;try{e=(e=e.replaceAll(i+"\r\n","")).replaceAll(i+"\n","")}catch(n){t&&console.log("ERROR: !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!processOutput... ",f(e),e)}"#collapse_output_open"==i&&(e=c(e,!0)),"#collapse_output"==i&&(e=c(e,!1)),"#hide_output"==i&&(e=""),"#hide"==i&&(e="")}}catch(e){a.e(e)}finally{a.f()}return e}},233:(e,n,t)=>{t.r(n),t.d(n,{createSpeech:()=>s,getTextFromJson:()=>d,saveSpeech:()=>p,speechFromDir:()=>y});var r=t(383),o=t(3);function a(){var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function i(t,r,o,a){var i=r&&r.prototype instanceof s?r:s,l=Object.create(i.prototype);return c(l,"_invoke",function(t,r,o){var a,c,i,s=0,l=o||[],p=!1,f={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(n,t){return a=n,c=0,i=e,f.n=t,u}};function d(t,r){for(c=t,i=r,n=0;!p&&s&&!o&&n<l.length;n++){var o,a=l[n],d=f.p,v=a[2];t>3?(o=v===r)&&(i=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=d&&((o=t<2&&d<a[1])?(c=0,f.v=r,f.n=a[1]):d<v&&(o=t<3||a[0]>r||r>v)&&(a[4]=t,a[5]=r,f.n=v,c=0))}if(o||t>1)return u;throw p=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(p&&1===l&&d(l,v),c=l,i=v;(n=c<2?e:i)||!p;){a||(c?c<3?(c>1&&(f.n=-1),d(c,i)):f.n=i:f.v=i);try{if(s=2,a){if(c||(o="next"),n=a[o]){if(!(n=n.call(a,i)))throw TypeError("iterator result is not an object");if(!n.done)return n;i=n.value,c<2&&(c=0)}else 1===c&&(n=a.return)&&n.call(a),c<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((n=(p=f.n<0)?i:t.call(r,f))!==u)break}catch(n){a=e,c=1,i=n}finally{s=1}}return{value:n,done:p}}}(t,o,a),!0),l}var u={};function s(){}function l(){}function p(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(c(n={},r,function(){return this}),n),d=p.prototype=s.prototype=Object.create(f);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=p,c(d,"constructor",p),c(p,"constructor",l),l.displayName="GeneratorFunction",c(p,o,"GeneratorFunction"),c(d),c(d,o,"Generator"),c(d,r,function(){return this}),c(d,"toString",function(){return"[object Generator]"}),(a=function(){return{w:i,m:v}})()}function c(e,n,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}c=function(e,n,t,r){function a(n,t){c(e,n,function(e){return this._invoke(n,t,e)})}n?o?o(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(a("next",0),a("throw",1),a("return",2))},c(e,n,t,r)}function i(e,n,t,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void t(e)}i.done?n(u):Promise.resolve(u).then(r,o)}function u(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function c(e){i(a,r,o,c,u,"next",e)}function u(e){i(a,r,o,c,u,"throw",e)}c(void 0)})}}function s(e,n){return l.apply(this,arguments)}function l(){return l=u(a().m(function e(n,t){var r,o,c,i,u,s,l,p=arguments;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=p.length>2&&void 0!==p[2]?p[2]:"echo",o=p.length>3&&void 0!==p[3]?p[3]:1,c=p.length>4&&void 0!==p[4]?p[4]:"tts-1",i=p.length>5&&void 0!==p[5]&&p[5],t||(t=process.env.OPENAI_API_KEY),t){e.n=1;break}return i&&console.log('No API Key provided and "env.OPENAI_API_KEY" not found.'),e.a(2);case 1:return e.p=1,new OpenAI(t),e.n=2,fetch("https://api.openai.com/v1/audio/speech",{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({model:c,input:n,voice:r,speed:o,response_format:"mp3"})});case 2:return u=e.v,e.n=3,u.buffer();case 3:s=e.v,e.n=5;break;case 4:return e.p=4,l=e.v,i&&console.log("createSpeech error",l),e.a(2);case 5:return e.a(2,s)}},e,null,[[1,4]])})),l.apply(this,arguments)}function p(e,n){return f.apply(this,arguments)}function f(){return f=u(a().m(function e(n,t){var o,c,i=arguments;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:return o=i.length>2&&void 0!==i[2]&&i[2],e.p=1,e.n=2,r.promises.writeFile(n,t);case 2:o&&console.log("Audio saved to ".concat(n)),e.n=4;break;case 3:e.p=3,c=e.v,o&&console.log("saveSpeech error",c);case 4:return e.a(2)}},e,null,[[1,3]])})),f.apply(this,arguments)}function d(e,n){return v.apply(this,arguments)}function v(){return v=u(a().m(function e(n,t){var r,o,c,i,u,s,l=arguments;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=l.length>2&&void 0!==l[2]?l[2]:"gpt-4o-mini",o=l.length>3&&void 0!==l[3]&&l[3],t||(t=process.env.OPENAI_API_KEY),t){e.n=1;break}return o&&console.log('No API Key provided and "env.OPENAI_API_KEY" not found.'),e.a(2);case 1:return e.p=1,c=n.title?"Title:   ".concat(n.title," \n "):"",c+=n.summary?"Summary: ".concat(n.summary," \n "):"",c+="Content: ".concat(JSON.stringify(n.content)),i={model:r,messages:[{role:"system",content:'\nYou are an assistant to a webpage to audio service. \nYou will be given a webpage you must convert it to a form of text ready for reading aloud.\nStart every conversion with a statement "You are listening to the audio version of this webpage" followed by the title and summary.\nUnder no circumstances should code be read and should be paraphrased or skipped. \n'},{role:"user",content:c}]},e.n=2,fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(i)});case 2:return u=e.v,e.n=3,u.json();case 3:e.v.choices[0].message.content,e.n=5;break;case 4:return e.p=4,s=e.v,o&&console.log("getTextFromJson error",s),e.a(2);case 5:return e.a(2,data)}},e,null,[[1,4]])})),v.apply(this,arguments)}function y(e,n,t){return h.apply(this,arguments)}function h(){return h=u(a().m(function e(n,t,c){var i,u,l,f,v,h,m,g,b,_,w,O=arguments;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:if(i=O.length>3&&void 0!==O[3]&&O[3],c||(c=process.env.OPENAI_API_KEY),c){e.n=1;break}return i&&console.log('No API Key provided and "env.OPENAI_API_KEY" not found.'),e.a(2);case 1:e.p=1,u=r.readdirSync(n),l=0;case 2:if(!(l<u.length)){e.n=7;break}if(f=o.join(n,u[l]),!r.lstatSync(f).isDirectory()){e.n=3;break}y(f,t),e.n=6;break;case 3:if(!(f.indexOf(".json")>=0)){e.n=6;break}if(h=r.readFileSync(f,"utf8"),null==(m=JSON.parse(h))||null===(v=m.meta)||void 0===v||!v.audio){e.n=6;break}return e.n=4,d(m);case 4:return g=e.v,e.n=5,s(g,c);case 5:b=e.v,_=u[l].substring(0,u[l].length-5),p(o.join(t,_)+".mp3",b);case 6:l++,e.n=2;break;case 7:e.n=9;break;case 8:return e.p=8,w=e.v,i&&console.log("speechFromDir error",w),e.a(2);case 9:return e.a(2)}},e,null,[[1,8]])})),h.apply(this,arguments)}},383:e=>{e.exports=require("fs")}},n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var a=n[r]={exports:{}};return e[r](a,a.exports,t),a.exports}t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};t.r(o),t.d(o,{default:()=>x});var a=t(383),c=t(3);const i=require("http-server");var u=["csp","sitemap","breadcrumbs","badges","keywords","comments","hide","image","toc","title"],s=["csp","sitemap","breadcrumbs","badges","keywords","comments","hide","image","toc","title"];function l(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==n.indexOf(r))continue;t[r]=e[r]}return t}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],-1===n.indexOf(t)&&{}.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function p(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return f(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?f(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return c=e.done,e},e:function(e){i=!0,a=e},f:function(){try{c||null==t.return||t.return()}finally{if(i)throw a}}}}function f(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function d(){var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var u=r&&r.prototype instanceof i?r:i,s=Object.create(u.prototype);return v(s,"_invoke",function(t,r,o){var a,i,u,s=0,l=o||[],p=!1,f={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(n,t){return a=n,i=0,u=e,f.n=t,c}};function d(t,r){for(i=t,u=r,n=0;!p&&s&&!o&&n<l.length;n++){var o,a=l[n],d=f.p,v=a[2];t>3?(o=v===r)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=d&&((o=t<2&&d<a[1])?(i=0,f.v=r,f.n=a[1]):d<v&&(o=t<3||a[0]>r||r>v)&&(a[4]=t,a[5]=r,f.n=v,i=0))}if(o||t>1)return c;throw p=!0,r}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(p&&1===l&&d(l,v),i=l,u=v;(n=i<2?e:u)||!p;){a||(i?i<3?(i>1&&(f.n=-1),d(i,u)):f.n=u:f.v=u);try{if(s=2,a){if(i||(o="next"),n=a[o]){if(!(n=n.call(a,u)))throw TypeError("iterator result is not an object");if(!n.done)return n;u=n.value,i<2&&(i=0)}else 1===i&&(n=a.return)&&n.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((n=(p=f.n<0)?u:t.call(r,f))!==c)break}catch(n){a=e,i=1,u=n}finally{s=1}}return{value:n,done:p}}}(t,o,a),!0),s}var c={};function i(){}function u(){}function s(){}n=Object.getPrototypeOf;var l=[][r]?n(n([][r]())):(v(n={},r,function(){return this}),n),p=s.prototype=i.prototype=Object.create(l);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,v(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return u.prototype=s,v(p,"constructor",s),v(s,"constructor",u),u.displayName="GeneratorFunction",v(s,o,"GeneratorFunction"),v(p),v(p,o,"Generator"),v(p,r,function(){return this}),v(p,"toString",function(){return"[object Generator]"}),(d=function(){return{w:a,m:f}})()}function v(e,n,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}v=function(e,n,t,r){function a(n,t){v(e,n,function(e){return this._invoke(n,t,e)})}n?o?o(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(a("next",0),a("throw",1),a("return",2))},v(e,n,t,r)}function y(e,n,t,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void t(e)}i.done?n(u):Promise.resolve(u).then(r,o)}function h(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function c(e){y(a,r,o,c,i,"next",e)}function i(e){y(a,r,o,c,i,"throw",e)}c(void 0)})}}function m(){return m=h(d().m(function e(){var n,r,o=arguments;return d().w(function(e){for(;;)switch(e.n){case 0:return n=o.length>0&&void 0!==o[0]?o[0]:"./src/posts/",r=o.length>1&&void 0!==o[1]?o[1]:"./src/client/audio/",e.n=1,Promise.resolve().then(t.bind(t,233));case 1:(0,e.v.speechFromDir)(n,r);case 2:return e.a(2)}},e)})),m.apply(this,arguments)}function g(){return g=h(d().m(function e(){var n,t,r,o,c,i=arguments;return d().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:"./",t=i.length>1&&void 0!==i[1]?i[1]:"./sitemap.txt",(r=!(i.length>2&&void 0!==i[2])||i[2])&&console.log("\n\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ START createSitemap \n\n"),e.n=1,b(n,"",r);case 1:return o=e.v,console.log("pages",o),e.p=2,e.n=3,a.promises.writeFile(t,o.join("\n")+"\n");case 3:r&&console.log("Sitemap file created successfully:",t),e.n=5;break;case 4:e.p=4,c=e.v,r&&console.error("Error creating or truncating sitemap file: ".concat(t),c);case 5:return e.a(2)}},e,null,[[2,4]])})),g.apply(this,arguments)}function b(e){return _.apply(this,arguments)}function _(){return _=h(d().m(function e(n){var t,r,o,i,u,s,l,f,v,y=arguments;return d().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=y.length>1&&void 0!==y[1]?y[1]:"",r=y.length>2&&void 0!==y[2]&&y[2],o=[],!["node_modules",".git","venv","env","__pycache__","dist","build",".idea",".vscode",".DS_Store",".pytest_cache",".mypy_cache","venv3","venv2","docs"].some(function(e){return n.includes(e)})){e.n=1;break}return e.a(2,o);case 1:return e.n=2,a.promises.stat(n);case 2:if(e.v.isDirectory()){e.n=3;break}return e.a(2,o);case 3:return console.log("prossdir",{directory:n}),e.n=4,a.promises.readdir(n);case 4:return i=e.v,e.n=5,Promise.all(i.filter(function(e){return e.includes("_map.json")}).map(function(){var e=h(d().m(function e(r){var i,u;return d().w(function(e){for(;;)switch(e.n){case 0:return i=c.join(n,r),u=JSON,e.n=1,a.promises.readFile(i,"utf-8");case 1:u.parse.call(u,e.v).forEach(function(e){e.filename&&o.push("/".concat(r.split("_")[0].split(".")[0],"/").concat(t?t+"/":"").concat(e.filename))});case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()));case 5:u=p(i.filter(function(e){return!c.extname(e)})),e.p=6,u.s();case 7:if((s=u.n()).done){e.n=10;break}return l=s.value,e.n=8,b(c.join(n,l),"",r);case 8:f=e.v,o=o.concat(f);case 9:e.n=7;break;case 10:e.n=12;break;case 11:e.p=11,v=e.v,u.e(v);case 12:return e.p=12,u.f(),e.f(12);case 13:return e.a(2,o)}},e,null,[[6,11,12,13]])})),_.apply(this,arguments)}function w(){return w=h(d().m(function e(n,t,r){var o,i=arguments;return d().w(function(e){for(;;)switch(e.n){case 0:return n||(n="./"),r||(r="./"),(o=i.length>3&&void 0!==i[3]&&i[3])&&console.log("\n~ ~ ~ cli_nbs2html: ".concat(n).concat(t,"\n")),e.n=1,a.promises.stat("".concat(n).concat(t,"/"));case 1:if(e.v.isDirectory()){e.n=2;break}return o&&console.log("\n\n UNABLE TO PROCESS DIRECTORY: ",t),e.a(2);case 2:return e.n=3,a.promises.readdir("".concat(n).concat(t,"/"));case 3:O(e.v.filter(function(e){return".ipynb"===c.extname(e)}).map(function(e){return c.parse(e).name}),n,t,r,o);case 4:return e.a(2)}},e)})),w.apply(this,arguments)}function O(e,n,t,r){return S.apply(this,arguments)}function S(){return S=h(d().m(function e(n,t,o,c){var f,v,y,h,m,g,b,_,w,O,S,A,k,E,x,P,T=arguments;return d().w(function(e){for(;;)switch(e.p=e.n){case 0:return(f=T.length>4&&void 0!==T[4]&&T[4])&&console.log("\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ cli_nbs2html: generate_sectionmap: ",n,o,f=!1),(v=i.createServer({root:"./",cors:!0,host:"0.0.0.0"})).listen(8085,function(){}),y=[],e.p=1,e.n=2,a.promises.access("".concat(c).concat(o));case 2:e.n=9;break;case 3:if(e.p=3,"ENOENT"!==(k=e.v).code){e.n=8;break}return e.p=4,e.n=5,a.promises.mkdir("".concat(c).concat(o),{recursive:!0});case 5:e.n=7;break;case 6:e.p=6,E=e.v,console.error("Error creating directory:",E);case 7:e.n=9;break;case 8:console.error("Error accessing directory:",k);case 9:if(!o){e.n=11;break}return e.n=10,j("".concat(t).concat(o),c);case 10:(h=e.v.meta).csp,h.sitemap,h.breadcrumbs,h.badges,h.keywords,h.comments,h.hide,h.image,h.toc,h.title,m=l(h,u),y.push(m);case 11:g=p(n),e.p=12,g.s();case 13:if((b=g.n()).done){e.n=17;break}if(_=b.value,!(x=!_.startsWith("_"))){e.n=15;break}return e.n=14,j("".concat(t).concat(o,"/").concat(_),"".concat(c).concat(o));case 14:x=e.v;case 15:(w=x)&&!w.meta.hide&&((O=w.meta).csp,O.sitemap,O.breadcrumbs,O.badges,O.keywords,O.comments,O.hide,O.image,O.toc,O.title,S=l(O,s),y.push(S));case 16:e.n=13;break;case 17:e.n=19;break;case 18:e.p=18,P=e.v,g.e(P);case 19:return e.p=19,g.f(),e.f(19);case 20:return A="".concat(c).concat(o||"index","_map.json"),e.p=21,e.n=22,a.promises.writeFile(A,JSON.stringify(y));case 22:e.n=25;break;case 23:return e.p=23,e.v,e.n=24,a.promises.writeFile(A,"{}");case 24:f&&console.log("----ERROR:",r.meta);case 25:v.close(function(){f&&console.log("Server closed.")});case 26:return e.a(2)}},e,null,[[21,23],[12,18,19,20],[4,6],[1,3]])})),S.apply(this,arguments)}function j(e,n){return A.apply(this,arguments)}function A(){return A=h(d().m(function e(n,r){var o,i,u,s,l,p,f,v,y,h=arguments;return d().w(function(e){for(;;)switch(e.p=e.n){case 0:if("json"!==(o=h.length>2&&void 0!==h[2]?h[2]:"json")){e.n=3;break}return e.n=1,Promise.resolve().then(t.bind(t,216));case 1:return u=e.v,s=u.nb2json,e.n=2,s(n);case 2:i=e.v;case 3:if(null==(l=i.meta.pyCode)||!l.length){e.n=4;break}return p=(p=c.basename(n,".ipynb")).replace(/^\d{2}_/,""),p=i.meta.default_exp||p,f=c.join(r,"".concat(p,".py")),v=l.join("\n").replace(/(^|\n) /g,"$1"),e.n=4,a.promises.writeFile(f,v);case 4:return delete i.meta.pyCode,y=c.join(r,"".concat(i.meta.filename,".").concat(o)),e.p=5,e.n=6,a.promises.writeFile(y,"json"===o?JSON.stringify(i):i);case 6:e.n=8;break;case 7:e.p=7,e.v,console.log("ERROR writing file:",y);case 8:return e.a(2,i)}},e,null,[[5,7]])})),A.apply(this,arguments)}function k(e){var n=e[0]||"",t=e[1]||!1,r=e[2]||!1,o=e[2]||!1;console.log("CLI RECEIVED ARGS:"),"sitemap"===n?function(){g.apply(this,arguments)}(t||"./",o||"./sitemap.txt"):"audio"===n?function(){m.apply(this,arguments)}(r,t):function(e,n,t){w.apply(this,arguments)}(r,n,t,!0)}if("file:///home/carlos/Documents/GitHub/ipynb2web/src/cli.js".includes("ipynb2web")){var E=process.argv.slice(2);"help"===E[0]||0===E.length?console.log("Usage: ipynb2web <COMMAND> <SAVETO> <FROM/or/SitemapName>\n    \nCommands:\n  sitemap      Create a sitemap.\n  audio        Create audio assets.\n  help         Display this help message.\n"):k(E)}const x=k;module.exports=o})();